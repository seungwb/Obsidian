#ETCStudy

```dataviewjs
// 환경 설정
const currentFile = dv.current();
const currentFolder = currentFile.file.folder;
const currentFolderName = currentFolder.split("/").pop();
const isWebExport = typeof app === "undefined";

// 경로 변환 함수
function convertToExportPath(originalPath) {
  return originalPath
    .replace(/\.md$/, ".html")
    .split("/")
    .map(segment =>
      segment
        .trim()
        .replace(/\s*-\s*/g, "-")
        .replace(/\s+/g, "-")
        .replace(/-+/g, "-")
    )
    .join("/");
}

// 파일 수집
const files = dv.pages(`"${currentFolder}"`)
  .where(p => p.file.name !== currentFolderName)
  .sort(p => p.file.name);

// HTML 테이블 생성
const table = document.createElement("table");
table.className = "dataview table-view-table";

// <thead>
const thead = document.createElement("thead");
const headRow = document.createElement("tr");

["목차", "경로"].forEach(header => {
  const th = document.createElement("th");
  th.textContent = header;
  headRow.appendChild(th);
});
thead.appendChild(headRow);
table.appendChild(thead);

// <tbody>
const tbody = document.createElement("tbody");

files.forEach(page => {
  const row = document.createElement("tr");

  // 첫 번째 열 (파일명)
  const nameCell = document.createElement("td");
  const linkEl = document.createElement("div");
  linkEl.textContent = page.file.name;
  linkEl.style.color = "var(--link-color)";
  linkEl.style.textDecoration = "underline";
  linkEl.style.cursor = "pointer";

  const rawPath = page.file.path;
  const exportPath = convertToExportPath(rawPath);

  if (!isWebExport) {
    // 웹에서는 HTML 링크로 이동
    linkEl.addEventListener("click", () => {
      window.location.href = exportPath;
    });
  } else {
    // Obsidian 내부에서는 노트 열기
    linkEl.addEventListener("click", () => {
      app.workspace.openLinkText(rawPath, "", false);
    });
  }

  nameCell.appendChild(linkEl);
  row.appendChild(nameCell);

  // 두 번째 열 (원본 경로 표시용)
  const pathCell = document.createElement("td");
  pathCell.textContent = rawPath;
  row.appendChild(pathCell);

  tbody.appendChild(row);
});

table.appendChild(tbody);

// 테이블 렌더링
dv.el("div", table);
```